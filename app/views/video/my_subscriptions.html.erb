<div class="subscription-list mb-5">
  <h1>Subscription List</h1>
  <p class="lead">Your subscriptions are listed here.</p>
  <table class="table table-hover table-bordered">
    <thead class="thead-light">
    <tr>
      <th scope="col">#</th>
      <th scope="col"></th>
      <th scope="col">Channel Name</th>
      <th scope="col">Description</th>
      <th scope="col">Video Count</th>
      <th scope="col">Subscriber Count</th>
      <th scope="col"></th>
    </tr>
    </thead>
    <tbody>
    <% @subscription_list.each_with_index do |subscription, index| %>
      <% channel_id = subscription.snippet.resource_id.channel_id %>
      <tr>
        <th scope="row"><%= index + 1 %></th>
        <th><%= image_tag(@channels_list[@channels_list.map(&:id).index(channel_id)].snippet.thumbnails.default.url) %></th>
        <td><%= subscription.snippet.title %></td>
        <td><%= truncate(subscription.snippet.description, length: 150) %></td>
        <td><%= @channels_list[@channels_list.map(&:id).index(channel_id)].statistics.video_count %></td>
        <td><%= @channels_list[@channels_list.map(&:id).index(channel_id)].statistics.subscriber_count %></td>
        <td><%= link_to("Remove subscription", remove_subscription_path(id: subscription.id), method: :delete) %></td>
      </tr>
    <% end %>
    </tbody>
  </table>
</div>